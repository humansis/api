<?php


namespace BeneficiaryBundle\Model\Vulnerability;



class Protocol
{
    /** @var int[] */
    private $score = [];

    public function __construct()
    {
        $this->initScoreTable();
    }


    private function initScoreTable()
    {
        foreach (CategoryEnum::all() as $category) {
            $this->score[$category] = 0;
        }
    }


    public function addScore(string $category, int $value)
    {
        if (!in_array($category, CategoryEnum::all())) {
            return;
        }

        $this->score[$category] = $value;
    }


    public function getCategoryScore(string $category): ?int
    {
        return $this->score[$category] ?? null;
    }


    public function getTotalScore(): int
    {
        $totalScore = 0;

        foreach (CategoryEnum::all() as $category) {
            $totalScore += $this->score[$category];
        }

        return $totalScore;
    }
}