<?php

namespace TransactionBundle\Repository;

use BeneficiaryBundle\Entity\Beneficiary;
use DistributionBundle\Entity\Assistance;
use TransactionBundle\Entity\Transaction;

/**
 * TransactionRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class TransactionRepository extends \Doctrine\ORM\EntityRepository
{
    /**
     * @param Assistance  $assistance
     * @param Beneficiary $beneficiary
     *
     * @return Transaction[]
     */
    public function findByAssistanceBeneficiary(Assistance $assistance, Beneficiary $beneficiary)
    {
        $qbr = $this->createQueryBuilder('t')
            ->join('t.assistanceBeneficiary', 'ab')
            ->andWhere('ab.assistance = :assistance')
            ->andWhere('ab.beneficiary = :beneficiary')
            ->setParameter('assistance', $assistance)
            ->setParameter('beneficiary', $beneficiary);

        return $qbr->getQuery()->getResult();
    }
}
